{% extends "kodverk_partial_result.html" %}
{% load static %}

{% block mitten-span %}

{% if kodverk_full %}

            <div>
            <table id="komplett_metadata_tabell" class="table table-bordered table-striped table-md">
            <tbody>
                    <tr>
                        <td colspan="2">Kodverk</td>
                        <td colspan="6"><strong>{{kodverk_full.titel_på_kodverk}}</strong></td>
                    </tr>
                    <tr>
                        <td colspan="2">Syfte</td>
                        <td colspan="6">{{kodverk_full.syfte}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Beskrivning av informationsbehov</td>
                        <td colspan="6">{{kodverk_full.beskrivning_av_informationsbehov}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Kategori</td>
                        <td colspan="6">{{kodverk_full.kategori}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Kodverk variant</td>
                        <td colspan="6">{{kodverk_full.koverk_variant}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Datum skapat</td>
                        <td colspan="6">{{kodverk_full.datum_skapat}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Mappning för rapportering</td>
                        <td colspan="6">{{kodverk_full.mappning_för_rapportering}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Ägare till kodverk</td>
                        <td colspan="6">{{kodverk_full.ägare_till_kodverk}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Giltig från</td>
                        <td colspan="6">{{kodverk_full.giltig_från}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Giltig tom</td>
                        <td colspan="6">{{kodverk_full.giltig_tom}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Senaste ändring</td>
                        <td colspan="6">{{kodverk_full.senaste_ändring}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Ansvarig förvaltare</td>
                        <td colspan="6">{{kodverk_full.ansvarig_förvaltare}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Status</td>
                        <td colspan="6">{{kodverk_full.status}}</td>
                    </tr>
                    <!-- <tr>
                        <td>Verifierad användning</td>
                        <td>{% for domän in domän_full %}
                        - {{domän.domän_namn}}<br>
                        {% endfor %}
                    </td>
                    </tr> -->
                </tbody>
                </table>

            </div>

            <div class="row mt-10" id="mitten-span-row">
                
                    <button class="ham"></button>
                    <nav class="navbar">
                        <button class="btn btn-outline-warning btn-sm" id="opponera_button">
                            <span style="font-size:smaller;">Kommentera</span>
                        </button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-outline-success btn-sm" id="bekräfta_button">
                            <span style="font-size:smaller;">Verifiera användning</span>
                        </button>
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-outline-info btn-sm" data-toggle="modal" data-target="#Comment">
                            <span style="font-size:smaller;">Ladda ner</span>
                        </button>
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-outline-info btn-sm" data-toggle="modal" data-target="#Comment">
                            <span style="font-size:smaller;">Hjälp</span>
                        </button>
                    </div>
                    </nav>
                
            </div>

     
                  

        <div class="modal fade" id="Comment" role="dialog">
            <div class="modal-dialog">		  
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">				
                  <h4 class="modal-title" style="font-family: frutiger;">Instruktioner för Verifiera/kommentera</h4>
                </div>
                <div class="modal-body">
                  <h4 style="font-family: frutiger;">Kommentera begrepp</h4>
                  <p style="font-family: Calibri;">
                    Funktionen Kommentera är tänkt att vara en möjlighet att framföra synpunkter om ett begrepp, hur och var det används eller om det finns felaktigheter. Man kan också ange synonyma termer som kan vara aktuella, ev översättning m m. Det är viktigt att kommentaren tydligt anger vad som avses samt motiveras på ett adekvat sätt. Ange även den kontext som din kommentar gäller. Kommentarerna kommer sedan bearbetas av BegreppsByrån. <br>Gör så här:<br>
                    <ul style="font-family: Calibri;"><li>1.	Tryck på knappen Kommentera</li><li>
                    2.	Fyll i kontaktuppgifter men namn, E-post och telefon så att vi kan nå dig för att ställa frågor.</li><li>
                    3.	Avge dina kommentarer om begreppet. Var så tydlig du kan! </li><li>
                    4.	Tryck på Skicka</li> </ul> <br></p>
                    <h4 style="font-family: frutiger;">Verifiera användning</h4><p style="font-family: Calibri;">
                Funktionen Verifiera användning ska användas för att visa information om var i verksamheten ett begrepp används. Det är således viktigt att de som söker och använder ett begrepp verifierar detta med denna funktion.<br>Gör så här:<br>
               <ul style="font-family: Calibri;">
                <li>1   . När du sökt och funnit ett begrepp som motsvarar ert behov tryck på knappen Verifiera användning</li>
                <li>2.   Fyll i E-postadress</li>
                <li>3.   Välj ett användningsområde i listan Verifierar att begreppet används i.</li>
                <li>3.1.     Finns inte det avsedda användningsområdet i listan, välj Annan.</li>
                <li>3.2.     Skriv sedan i ett nytt användningsområde i fältet Om annat.</li>
                <li>4.  Tryck på Skicka</li></ul></p>
                    
                    </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">stäng</button>
                </div>
              </div>			
            </div>
          </div>

          

        <div>
        <table id="kodtext_tabell" name="kodtext_tabell" class="display" style="width:100%">
            <thead>
                <tr>
                    <th></th>
                    <th>Kod</th>
                    <th>Kodtext</th>
                </tr>
            </thead>
            <tbody>
            {% for i in kodtext_full %}
            <tr>
                <td></td>
                <td>{{i.kod}}</td>
                <td>{{i.kodtext}}</td>
            </tr>
            {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th></th>
                    <th>Kod</th>
                    <th>Kodtext</th>
                </tr>
        
            
            </tfoot>
        </table>
    </div>
{% else %}
        <p>Ingen definition hittades...</p>
{% endif %}

{% endblock mitten-span %}

{% block extra_javascript %}
{{ super }}

<script src="{% static '/js/jquery.dataTables.min.js' %}"></script>


<link rel="stylesheet" href="{% static '/css/jquery.dataTables.min.css' %}" media="screen">

<script>

/* Formatting function for row details - modify as you need */

function format (d) {
    // `d` is the original data object for the row
    return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
        '<tr>'+
            '<td>Kod:</td>'+
            '<td>'+d.kod+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Kodtext:</td>'+
            '<td>'+d.kodtext+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Annan kodtext:</td>'+
            '<td>'+d.annan_kodtext+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Definition:</td>'+
            '<td>'+d.definition+'</td>'+
        '</tr>'+
    '</table>';
};

 // Add event listener for opening and closing details
 $('#kodtext_tabell tbody').on('click', 'td.details-control', function () {
     var tr = $(this).closest('tr');
     var row = table.row( tr );

     if ( row.child.isShown() ) {
         // This row is already open - close it
         row.child.hide();
         tr.removeClass('shown');
     }
     else {
         // Open this row
         row.child( format(row.data()) ).show();
         tr.addClass('shown');
     }
 } );

 $( document ).ready(function() {
             
    var table = $('#kodtext_tabell').DataTable({
        "stateSave" : true,
        "retrieve" : true,
        "initComplete": function(){ 
        $("#kodtext_tabell").show(); 
    },
        "language": {
            "url": "/table_language_translations/"
    } 
    });
});
    
//     $.ajax({
//         type: "GET",
//         dataType: "json",
//         url: '/kodtext_json/?q={{kodverk_id}}',
//         success: function(data,textStatus,jqXHR) {
//             console.log('JSON loaded successfully, statusCode =', textStatus);
//             instantiate_table(data);
//         },
//         complete : function(data,textStatus,jqXHR) {
//             console.log('JSON request complete, statusCode =', textStatus);
            
//         },
//         fail : function(data,textStatus,jqXHR) {        
//             $('#mitten-span-middle-column').html("Fel - Hoppsan! Jag får ingen kodtext från servern");
//         }
//     });
// 

var navbar = document.querySelector(".navbar")
var ham = document.querySelector(".ham")

// toggles hamburger menu in and out when clicking on the hamburger
function toggleHamburger(){
  navbar.classList.toggle("showNav")
  ham.classList.toggle("showClose")
}

ham.addEventListener("click", toggleHamburger)

// toggle when clicking on links

// METHOD 1
var menuLinks = document.querySelectorAll(".menuLink")
menuLinks.forEach( 
  function(menuLink) { 
    menuLink.addEventListener("click", toggleHamburger) 
  }
)

</script>

{% endblock extra_javascript %}

